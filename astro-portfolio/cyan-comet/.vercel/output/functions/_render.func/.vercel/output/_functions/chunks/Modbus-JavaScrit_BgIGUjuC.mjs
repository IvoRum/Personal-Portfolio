import { a as createComponent, r as renderTemplate, m as maybeRenderHead, u as unescapeHTML } from './astro/server_CzNe6w_R.mjs';
import 'kleur/colors';
import 'clsx';

const html = "<h2 id=\"what-is-modbus-and-why-javascript\">What is Modbus and Why JavaScript?</h2>\n<p>Modbus is a client/server data communications protocol used in the application layer. It was originally published by Modicon (now Schneider Electric) in 1979 for use with its programmable logic controllers (PLCs). It is an old communication protocol used exclusively to connect various machine parts together. And what does this protocol, mainly used with PLCs, have to do with JavaScript? Well, recently I was contacted to make a user interface to interact with Modbus-connected devices. I didn’t have a lot of time to work on this request, so I started reading on the topic of Modbus and found a JavaScript library that can read from it via network or serial ports. So why not have a JS-based user interface? After testing the library, it worked like a charm.</p>\n<h2 id=\"implementation\">Implementation</h2>\n<p>For this project to work, I created an Electron project. Electron is a framework that lets you create desktop apps with web technologies like HTML, CSS, and JavaScript. I chose Electron because I had never used it and thought, well, let’s give it a shot.</p>\n<p>Creating an Electron project is easy:</p>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\"><code><span class=\"line\"><span>mkdir my-electron-app &#x26;&#x26; cd my-electron-app</span></span>\n<span class=\"line\"><span>npm init</span></span>\n<span class=\"line\"><span></span></span></code></pre>\n<p>Then, install the Electron package into your app’s devDependencies.</p>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\"><code><span class=\"line\"><span>npm install --save-dev electron</span></span>\n<span class=\"line\"><span></span></span></code></pre>\n<p>Then just add this script to the <code>package.json</code>:</p>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\"><code><span class=\"line\"><span>{</span></span>\n<span class=\"line\"><span>  \"scripts\": {</span></span>\n<span class=\"line\"><span>    \"start\": \"electron .\"</span></span>\n<span class=\"line\"><span>  }</span></span>\n<span class=\"line\"><span>}</span></span>\n<span class=\"line\"><span></span></span></code></pre>\n<p>After this is all done, to run Electron just type:</p>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\"><code><span class=\"line\"><span>npm start</span></span>\n<span class=\"line\"><span></span></span></code></pre>\n<p>Electron Quick Start: <a href=\"https://www.electronjs.org/docs/latest/tutorial/quick-start\">https://www.electronjs.org/docs/latest/tutorial/quick-start</a></p>\n<p>And now for the Modbus library:</p>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\"><code><span class=\"line\"><span>npm i modbus-serial</span></span>\n<span class=\"line\"><span></span></span></code></pre>\n<p>To test it out, use this script provided by the creator of the library:</p>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\"><code><span class=\"line\"><span style=\"color:#6A737D\">// create an empty modbus client</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> ModbusRTU</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> require</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"modbus-serial\"</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> client</span><span style=\"color:#F97583\"> =</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> ModbusRTU</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">// open connection to a serial port</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">// use COM for Windows</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">client.</span><span style=\"color:#B392F0\">connectRTUBuffered</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">  \"/dev/ttyUSB0\"</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  { baudRate: </span><span style=\"color:#79B8FF\">9600</span><span style=\"color:#E1E4E8\"> },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  write</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">function</span><span style=\"color:#B392F0\"> write</span><span style=\"color:#E1E4E8\">() {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  client.</span><span style=\"color:#B392F0\">setID</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">1</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">  // write the values 0, 0xffff to registers starting at address 5</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">  // on device number 1.</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  client.</span><span style=\"color:#B392F0\">writeRegisters</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">5</span><span style=\"color:#E1E4E8\">, [</span><span style=\"color:#79B8FF\">0</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#79B8FF\">0xffff</span><span style=\"color:#E1E4E8\">]).</span><span style=\"color:#B392F0\">then</span><span style=\"color:#E1E4E8\">(read);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">function</span><span style=\"color:#B392F0\"> read</span><span style=\"color:#E1E4E8\">() {</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">  // read the 2 registers starting at address 5</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">  // on device number 1.</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  client.</span><span style=\"color:#B392F0\">readHoldingRegisters</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">5</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#79B8FF\">2</span><span style=\"color:#E1E4E8\">).</span><span style=\"color:#B392F0\">then</span><span style=\"color:#E1E4E8\">(console.log);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span></code></pre>\n<p>Where the number 1 in <code>client.setID(1)</code> is the device number you want to access. On the device, under the settings, you will be able to change this client ID. In Siemens’ case, this is named <em>Address</em>.</p>\n<p><img src=\"/blog/modbus-js/image.png\" alt=\"Access Token\"></p>\n<p>And make sure that the baud rate set in:</p>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\"><code><span class=\"line\"><span style=\"color:#E1E4E8\">client.</span><span style=\"color:#B392F0\">connectRTUBuffered</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">  \"/dev/ttyUSB0\"</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  { baudRate: </span><span style=\"color:#79B8FF\">9600</span><span style=\"color:#E1E4E8\"> },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  write</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"></span></code></pre>\n<p>matches the one on the device.</p>\n<p>Then in the <code>client.readHoldingRegisters(5, 2)</code> set the first number to the address you want to access on the device and the second parameter to the length which should be specified in the documentation.</p>\n<p>After that, you are all set to create a user interface for communication with Modbus. Have fun programming!</p>\n<h2 id=\"demo-coming-soon\">Demo Coming Soon!!</h2>\n<h2 id=\"sources\">Sources</h2>\n<ul>\n<li><a href=\"https://www.npmjs.com/package/modbus-serial\">https://www.npmjs.com/package/modbus-serial</a></li>\n<li><a href=\"https://cache.industry.siemens.com/dl/files/781/19020781/att_1007699/v1/modbus_users_guide_2000584-001.pdf\">https://cache.industry.siemens.com/dl/files/781/19020781/att_1007699/v1/modbus_users_guide_2000584-001.pdf</a></li>\n<li><a href=\"https://www.electronjs.org/docs/latest/\">https://www.electronjs.org/docs/latest/</a></li>\n</ul>";

				const frontmatter = {"title":"Modbus and JavaScript","description":"How to use Modbus with JavaScript","pubDate":"May 05, 2024","heroImage":"/blog/modbus-js/blog-modbus.png"};
				const file = "C:/tomcats/Personal-Portfolio/astro-portfolio/cyan-comet/src/content/blog/Modbus-JavaScrit.md";
				const url = undefined;
				function rawContent() {
					return "\r\n## What is Modbus and Why JavaScript?\r\n\r\nModbus is a client/server data communications protocol used in the application layer. It was originally published by Modicon (now Schneider Electric) in 1979 for use with its programmable logic controllers (PLCs). It is an old communication protocol used exclusively to connect various machine parts together. And what does this protocol, mainly used with PLCs, have to do with JavaScript? Well, recently I was contacted to make a user interface to interact with Modbus-connected devices. I didn’t have a lot of time to work on this request, so I started reading on the topic of Modbus and found a JavaScript library that can read from it via network or serial ports. So why not have a JS-based user interface? After testing the library, it worked like a charm.\r\n\r\n## Implementation\r\n\r\nFor this project to work, I created an Electron project. Electron is a framework that lets you create desktop apps with web technologies like HTML, CSS, and JavaScript. I chose Electron because I had never used it and thought, well, let's give it a shot.\r\n\r\nCreating an Electron project is easy:\r\n\r\n```\r\nmkdir my-electron-app && cd my-electron-app\r\nnpm init\r\n```\r\n\r\nThen, install the Electron package into your app's devDependencies.\r\n\r\n```\r\nnpm install --save-dev electron\r\n```\r\n\r\nThen just add this script to the `package.json`:\r\n\r\n```\r\n{\r\n  \"scripts\": {\r\n    \"start\": \"electron .\"\r\n  }\r\n}\r\n```\r\n\r\nAfter this is all done, to run Electron just type:\r\n\r\n```\r\nnpm start\r\n```\r\n\r\nElectron Quick Start: [https://www.electronjs.org/docs/latest/tutorial/quick-start](https://www.electronjs.org/docs/latest/tutorial/quick-start)\r\n\r\nAnd now for the Modbus library:\r\n\r\n```\r\nnpm i modbus-serial\r\n```\r\n\r\nTo test it out, use this script provided by the creator of the library:\r\n\r\n```javascript\r\n// create an empty modbus client\r\nconst ModbusRTU = require(\"modbus-serial\");\r\nconst client = new ModbusRTU();\r\n\r\n// open connection to a serial port\r\n// use COM for Windows\r\nclient.connectRTUBuffered(\r\n  \"/dev/ttyUSB0\",\r\n  { baudRate: 9600 },\r\n  write\r\n);\r\n\r\nfunction write() {\r\n  client.setID(1);\r\n\r\n  // write the values 0, 0xffff to registers starting at address 5\r\n  // on device number 1.\r\n  client.writeRegisters(5, [0, 0xffff]).then(read);\r\n}\r\n\r\nfunction read() {\r\n  // read the 2 registers starting at address 5\r\n  // on device number 1.\r\n  client.readHoldingRegisters(5, 2).then(console.log);\r\n}\r\n```\r\n\r\nWhere the number 1 in `client.setID(1)` is the device number you want to access. On the device, under the settings, you will be able to change this client ID. In Siemens' case, this is named _Address_.\r\n\r\n![Access Token](/blog/modbus-js/image.png)\r\n\r\nAnd make sure that the baud rate set in:\r\n\r\n```javascript\r\nclient.connectRTUBuffered(\r\n  \"/dev/ttyUSB0\",\r\n  { baudRate: 9600 },\r\n  write\r\n);\r\n```\r\n\r\nmatches the one on the device.\r\n\r\nThen in the `client.readHoldingRegisters(5, 2)` set the first number to the address you want to access on the device and the second parameter to the length which should be specified in the documentation.\r\n\r\nAfter that, you are all set to create a user interface for communication with Modbus. Have fun programming!\r\n\r\n## Demo Coming Soon!!\r\n\r\n## Sources\r\n\r\n- [https://www.npmjs.com/package/modbus-serial](https://www.npmjs.com/package/modbus-serial)\r\n- [https://cache.industry.siemens.com/dl/files/781/19020781/att_1007699/v1/modbus_users_guide_2000584-001.pdf](https://cache.industry.siemens.com/dl/files/781/19020781/att_1007699/v1/modbus_users_guide_2000584-001.pdf)\r\n- [https://www.electronjs.org/docs/latest/](https://www.electronjs.org/docs/latest/)\r\n";
				}
				function compiledContent() {
					return html;
				}
				function getHeadings() {
					return [{"depth":2,"slug":"what-is-modbus-and-why-javascript","text":"What is Modbus and Why JavaScript?"},{"depth":2,"slug":"implementation","text":"Implementation"},{"depth":2,"slug":"demo-coming-soon","text":"Demo Coming Soon!!"},{"depth":2,"slug":"sources","text":"Sources"}];
				}

				const Content = createComponent((result, _props, slots) => {
					const { layout, ...content } = frontmatter;
					content.file = file;
					content.url = url;

					return renderTemplate`${maybeRenderHead()}${unescapeHTML(html)}`;
				});

export { Content, compiledContent, Content as default, file, frontmatter, getHeadings, rawContent, url };
